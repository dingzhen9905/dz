<!--
	//字段:bill_no	//主:	// 细:
-->
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>部门管理（新建）</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" type="text/css" href="../../css/common/mui.css" />
		<link rel="stylesheet" type="text/css" href="../../css/common/app.css" />
		<link rel="stylesheet" type="text/css" href="../../css/index.css" />
		<link rel="stylesheet" type="text/css" href="../../css/common/mui.picker.css" />
		<link rel="stylesheet" type="text/css" href="../../css/common/mui.dtpicker.css" />
		<link rel="stylesheet" href="../../css/fonts/iconfont.css" />
		<style>
			body{
				font-size: 12px;
			}
			
			form {
				margin: 5px 0;
			}
			.mui-row{
				padding:8px;
			}
			input[placeholder] {
				font-size: 12px;
			}
			.mui-input-row.lastInput:after{
				height:0;
			}
			#banzuMember li:nth-of-type(odd){
				background:#F0F0F0;
			}
			#contList li:nth-of-type(odd){
				background:#F0F0F0;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav headerMain editHeader" id="head" style="height:75px;">
			<a class="mui-action-back mui-pull-left" id="goBack">返回</a>
			<div class="mui-title plistTitle" >
				<p id="title">新增排班</p>
				<h1 id="header" ></h1>	
			</div>	
		</header>
		<div class="mui-content" style="padding-top:75px;margin-top:10px;margin-bottom:30px;">
			<div class="mui-input-group" id="linkvdUsercom" style="padding:5px 18px 5px 18px;margin-bottom:5px;position: relative;display:none;">
				<div class="mui-row">
					<span class="mui-col-xs-3" style="color:#ACACB4;">图片班别:</span>
					<span class="mui-col-xs-8" id="bill_bflow"></span>
					<br/>
					<span class="mui-col-xs-3" style="color:#ACACB4;">指令编号:</span>
					<span class="mui-col-xs-8" id="bill_task"></span>
					<br/>
					<span class="mui-col-xs-3" style="color:#ACACB4;">参数班组名称:</span>
					<span class="mui-col-xs-8" id="bill_name"></span>
					<br/>
					<span class="mui-col-xs-3" style="color:#ACACB4;">bill_no:</span>
					<span class="mui-col-xs-8" id="bill_no"></span>
				</div>
			</div>
			<div class="mui-input-group" style="padding:5px 18px 5px 18px;margin-bottom:5px;">
				<div class="mui-input-row" id="oldContext">
					<div class="mui-row" style="padding:0;">
						<div class="mui-col-xs-10">
							<label>排班规则：</label>
							<input id="old_context" type="text" class="requiredInput" placeholder="" readonly="readonly">
						</div>
						<button id="changeValue" class="mui-col-xs-2" style="position: relative;top:8px;padding:0;margin:0;">修改</button>
					</div>
				</div>
				<div id="changeContext" style="display: none;">
					<div class="mui-input-row">
						<div class="mui-row" style="padding:0;">
							<div class="mui-col-xs-11">
								<label>新排班规则：</label>
								<input id="bill_context" type="text" class="" readonly="readonly" placeholder="录入新的排班规则">
							</div>
							<button id="clearValue" class="mui-col-xs-1 mui-icon mui-icon-close" style="position: relative;top:8px;padding:0;margin:0;"></button>
						</div>
					</div>
					<div class=" lastInput mui-row" style="padding-top:5px;" id="banciListBox">
						<!--<span type="" class="mui-col-xs-1 zao"></span>-->
						<div id="banciList" class="mui-col-xs-10">
							<button type="button" class="mui-btn mui-btn-primary mui-btn-outlined ban mui-col-xs-2 zao">早</button>
							<button type="button" class="mui-btn mui-btn-primary mui-btn-outlined ban mui-col-xs-2 zho">中</button>
							<button type="button" class="mui-btn mui-btn-primary mui-btn-outlined ban mui-col-xs-2 yee">夜</button>
							<button type="button" class="mui-btn mui-btn-primary mui-btn-outlined ban mui-col-xs-2 bai">白</button>
							<button type="button" class="mui-btn mui-btn-primary mui-btn-outlined ban mui-col-xs-2 xiu">休</button>
						</div>
						<button type="button" id="cancelChange" class="mui-btn mui-btn-outlined  mui-col-xs-2 " style="border-color:gray;">取消</button>
					</div>
				</div>
			</div>
			<div class="mui-input-group" style="padding:5px 18px 5px 18px;margin-bottom:5px;color:gray;">
				<div class="mui-input-row" id="oldContext">
					<label>排班班组：</label>
					<input id="bill_spec" type="text" class="requiredInput" placeholder="" readonly="readonly">
				</div>
				<span style="color:darkgray;font-size:10px;padding-left:13px;">*注: 不可更改</span>
			</div>
			<!--<div class="mui-input-group" style="padding:8px 18px 5px 32px;margin-bottom:5px;">
				<label>排班班组：</label>
				<textarea name="" rows="2" cols="3" placeholder="录入部门要求" id="bill_spec" readonly="readonly" class="requiredInput" style="color:gray;border:1px solid #eee;width:100%;margin-top:5px;font-size:12px;line-height: 16px;"></textarea>
				<span style="color:darkgray;font-size:10px;">*注: 可更改顺序,多个班组之间用<span style="color:#8B0000;">英文逗号</span>分隔</span>
			</div>-->
			<div class="mui-input-group" style="padding:5px 18px 5px 18px;margin-bottom:5px;">
				<div class="mui-input-row lastInput">
					<label>选择开始时间 :</label>
					<input id="bill_date" type="date" class="requiredInput" placeholder="">
				</div>
			</div>
			<div class="mui-input-group" style="padding:5px 18px 5px 18px;margin-bottom:5px;">
				<div class="mui-input-row lastInput">
					<label>选择结束时间 :</label>
					<input id="bill_ndate" type="date" class="requiredInput" placeholder="">
				</div>
			</div>
			<div class="mui-input-group" id="cc" style="padding:5px 10px 5px 10px;margin-bottom:5px;">
				<div class="mui-row" style="padding-left: 25px; padding-right:18px;">
					<span class="mui-col-xs-7 spn">班次信息：</span>
					<span class="mui-col-xs-5"  style="color:darkgrey;font-size:10px;padding-left:13px;line-height:30px;">*点击可修改上下班时间</span>
					<!--<button type="button" id="addDetail" class="mui-icon mui-icon-plusempty mui-pull-right mui-col-xs-2 mui-btn-outlined" style="position:relative;top:-2px;padding:0;background:;color: #0062CC;"></button>-->
				</div>
				<div id="postinfo" style="background:#E3E3E3;">
					<div id="" class="mui-row" style="background:#ACACB4;color:#fff;text-align:center;font-size:12px;line-height: 14px;padding:3px;margin:0;">
						<span class="mui-col-xs-4">班次名称</span>
						<span class="mui-col-xs-4">上班时间</span>
						<span class="mui-col-xs-4">下班时间</span>
					</div>
					<ul id="contList" style="padding:0;margin:0;list-style:none;text-align: center;">
						<!--<li class="mui-row" style="padding:5px 3px;margin:0;background:;">
							<span class="mui-col-xs-6">白班</span>
							<span class="mui-col-xs-6">8:00-16:00</span>
						</li>
						<li class="mui-row" style="padding: 3px;margin:0;">
							<span class="mui-col-xs-6">夜班</span>
							<span class="mui-col-xs-6">12:00-23:00</span>
						</li>-->
					</ul>
				</div>
			</div>
			<div class="mui-input-group" style="padding:5px 18px 5px 18px;margin-bottom:5px;">
				<div class="mui-row">
					<span class="mui-col-xs-3"  style="color:;font-size:12px;padding-left:13px;line-height:30px;">班组人员：</span>
					<span class="mui-col-xs-7"  style="color:darkgrey;font-size:10px;padding-left:13px;line-height:30px;">*点击可修改</span>
					<!--<span class="mui-col-xs-3"  style="color:darkgrey;font-size:10px;padding-left:13px;line-height:30px;">+</span>-->
					<button id="addClerk" class="mui-col-xs-2" style="position: relative;top:8px;padding:0;margin:0;"> + </button>
					<!--<button id="" class="mui-col-xs-2" style="position: relative;top:8px;padding:0;margin:0;">修改</button>-->
				</div>
				<ul id="banzuMember" class="mui-row" style="border-top:1px solid #EAEAEA;margin-left:10px;padding-top:5px;margin-top:0;list-style:;">
					<!--<li class="mui-col-xs-6" style="height: 30px;line-height: 30px;padding-left: 5px;">刘1</li>
					<li class="mui-col-xs-6" style="height: 30px;line-height: 30px;padding-left: 5px;">刘2</li>
					<li class="mui-col-xs-6" style="height: 30px;line-height: 30px;padding-left: 5px;">刘3</li>
					<li class="mui-col-xs-6" style="height: 30px;line-height: 30px;padding-left: 5px;">刘4</li>
					<li class="mui-col-xs-6" style="height: 30px;line-height: 30px;padding-left: 5px;">刘5</li>
					<li class="mui-col-xs-6" style="height: 30px;line-height: 30px;padding-left: 5px;">刘6</li>-->
				</ul>
			</div>
			<div class="mui-row" style="background: #ffffff;"> 
				<button type="buttton" class="mui-btn mui-btn-primary mui-btn-outlined mui-col-xs-12" id="saveBtn" style="text-align: center;margin-right:;" >确&nbsp; &nbsp; &nbsp;定</button>	
			</div>
		</div>
	</body>
	

	
	<!--出库扫码-->
	<script src="../../js/mui.min.js"></script>
	<script src="../../js/jquery-2.1.0.js"></script>
	
	<script src="../../js/md5.js"></script>
	<script src="../../js/mui.dtpicker.js"></script>
	<script src="../../js/mui.picker.js"></script>
	<script src="../../js/index.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../js/immersed.js" type="text/javascript" charset="utf-8"></script>
		

	<script type="text/javascript">
		mui.init({});
		var $$ = jQuery.noConflict();
		var teamBillCom = "";
		var teamBillComName = "";
		var date = new Date();
		var userbillNo = "";
		var loginCom = "";
		var loginComName = "";
		var flagNew = "";
		var onlyCode = "";
		var fbill_no = "";
		var detailInfo = null;
		var rqsData = "";
		var bill_task = "";
		var bancitimeArr = [];
		mui.plusReady(function() {
//	CALL pro_paiban_single('#{bill_spec}','#{bill_bflow}','#{bill_context}','#{bill_date}','#{bill_ndate}');
//	CALL pro_paiban_single('配电一班','两班倒','早,早,中夜,休,休','2018-07-20 00:00:00','2018-07-31 00:00:00');
//			{
//	            "图片班别":"两班倒",				bill_bflow
//	            "数量数量":"0",
//	            "指令编号":"2001",				bill_task
//	            "日期日期":"2018-06-17 09:12:27",
//	            "参数班组名称":"配电班",			bill_name
//	            "内容排班规则":"早,早,休,夜,夜,休",	bill_context
//	            "标题班组":"配电一班,配电二班",		bill_spec
//	            "金额金额":"0"
//	        },
			
			// TODO 1. 页面上的字段========================
			var h = {
				bill_bflow : "",
				bill_task:"",
				bill_name:"",
				bill_no:""
			};
			var v = {
				bill_spec 	:"",							//主:				// 细:
				bill_context:"",							//主:				// 细:
				bill_date 	:"",							//主:ROOT?			// 细:?
				bill_ndate 	:""							//主:				// 细:
			};

			// TODO 2. 接收传过来的参数=============================
			var self = plus.webview.currentWebview();
			// 基本参数(必要)
			teamBillCom 	= self.teamBillCom; 	// 1.管理单位代码
			teamBillComName = self.teamBillComName;	// 2.管理单位名称
			fbill_no 		= self.fbill_no;		// 3.fbill_no是
			loginCom 		= self.loginCom;		// 4.登录人的代码
			loginComName 	= self.loginComName;	// 5.登录人的名称
			userbillNo 		= self.userbillNo;		// 6.登录单位代码
			userName 		= self.userName;		// 7.登录单位名称
			privileges 		= self.privileges;		// 8.当前的权限是
			fromPage 		= self.fromPage;		// 9.从哪个页面来
			// 其他
			flagNew = self.flagNew;
			detailInfo = self.detailInfo;
			
			// TODO 3. 基础设置/赋值 
			document.getElementById("header").innerHTML = detailInfo["参数"].split(",")[1]; 				// 班别+班组名称
			document.getElementById("bill_task").innerHTML = detailInfo["指令"]; 	 // 指令编号
			document.getElementById("bill_no").innerHTML = detailInfo["参数"].split(",")[0]; 	 // 参数班组名称
			document.getElementById("bill_name").innerHTML = detailInfo["参数"].split(",")[1]; 	 // 参数班组名称
			document.getElementById("bill_bflow").innerHTML = detailInfo["图片"]; 	 // 图片班别
			document.getElementById("bill_spec").value = detailInfo["标题"]; 	 // 班组			
			document.getElementById("bill_context").value = detailInfo["内容"]; 	 // 排班规则
			document.getElementById("old_context").value = detailInfo["内容"]; 	 // 排班规则
			// 
			// 查询考勤组
			var clerkInfoParams = {
				name: 'msvr',
				bill_task: "VR_find_vdhr105_04", 				// 查询的指令
				bill_com: teamBillCom, 						// 当前单位
				bill_user: userbillNo,						// 当前登陆人
				bill_name: document.getElementById("bill_spec").value,			// 班组名称
				currentPage: 1,
				pageSize: 30,
				paramText: ""
			};
//			mui.toast("查询班组人员的指令："+"\n"+"VR_find_vdhr105_04")
			rqsDataAjax(clerkInfoParams, '/Find/Ddata/activity', clerkInfo, '../login.html');
			var banciParams = {
				name: 'msvr',
				bill_task: "VR_find_vdhr401_01", 				// 查询的指令
				bill_com: teamBillCom, 						// 当前单位
				bill_user: userbillNo,						// 当前登陆人
//				bill_user: 'vdvc00100_20180612_H101H001',	// 当前登陆人
				bill_bflow: document.getElementById("bill_spec").value,			// 班组名称
//				bill_bflow: "信息中心",			// 班组名称
				currentPage: 1,
				pageSize: 30,
				paramText: ""
			};
			rqsDataAjax(banciParams, '/Find/Ddata/activity', banciInfo, '../login.html');
			
			// TODO 4. 事件绑定==================================
//			document.getElementById("bill_ndate").addEventListener("tap",choiceNdate);
//			document.getElementById("bill_date").addEventListener("tap",choiceDate);
			document.getElementById("saveBtn").addEventListener("tap",saveBtn);
			// TODO 5. 监听自定义事件=============================
			window.addEventListener('vdhr105SelecteClerk', function(event) {
				var linkName = event.detail.linkName;
				var dataRow = event.detail.dataRow;
				if(typeof(dataRow)=="string"){
					dataRow = JSON.parse(dataRow);
				}
				var num = event.detail.serialNum;
				var other = event.detail.other;
				if(vlUtils.isnull(num)){//直接追加
					var datajson = {};
					// 班组人员代码拼接
					var billtextArr = [];
					for(var a = 0; a < jQuery("#banzuMember li").length; a++){
						var selectedcode = jQuery("#banzuMember li").eq(a).attr("data-no");
						billtextArr.push(selectedcode);
					}
					var memberNum = 0;
					datajson.data = dataRow;
					for(var j = 0; j < billtextArr.length; j++){
						for(var k = 0; k < datajson.data.length; k++){
							if(billtextArr[j] == datajson.data[k]["图片"]){
								datajson.data.splice(k,1);
							}
						}
					}
					clerkInfo(datajson,false,true);
				}else{//替换
//					jQuery("#banzuMember li").eq(num).html(linkName+"="+dataRow[0]["图片"].slice(-8));
					jQuery("#banzuMember li").eq(num).html(linkName);
					jQuery("#banzuMember li").eq(num).attr("data-row",JSON.stringify(dataRow));
					jQuery("#banzuMember li").eq(num).attr("data-no",dataRow[0]["图片"]);
				}
			});
			
			// TODO 6. 事件/方法=================================
			// 保存指令
			function saveBtn(){ 
				plus.nativeUI.showWaiting();//这里是开始显示原生等待框
				var checkResults = checkRequiredItems();//验证是否为必填字段  
				if(checkResults == false){
					plus.nativeUI.closeWaiting();//这里监听页面是否加载完毕，完成后关闭等待框
					return;
				}
				var aaa = document.getElementById("bill_task").innerHTML
				
				// 签收
				var date = new Date();
				// 班组人员代码拼接
				var billtextArr = [];
				for(var a = 0; a < jQuery("#banzuMember li").length; a++){
					billtextArr.push (jQuery("#banzuMember li").eq(a).attr("data-no"));
				}
				var billtext = billtextArr.join(",");
				// 班次时间
				//
				for(var a = 0; a < jQuery("#contList li").length; a++){
					
					var banci = jQuery("#contList li").eq(a).find(".banci").html();
					var shangban = jQuery("#contList li").eq(a).find(".shangban").html();
					var xiaban = jQuery("#contList li").eq(a).find(".xiaban").html();
					var litxt = banci + "=" + shangban + "," + xiaban ;
					bancitimeArr.push(litxt);
				}
				var billtitle = bancitimeArr.join(";");
				
				var entryAcctparams = {
					name		: "msvr",
					bill_no		: document.getElementById("bill_no").innerHTML,				// 生成一个bill_no   //dataSourse.main.bill_no
//					bill_task	: document.getElementById("bill_task").innerHTML,		// 结账指令   // VE_test_vdac202  //VE_oinv_vdac202
					bill_task	: "VE_plan_vdac401",		// 结账指令   // VE_test_vdac202  //VE_oinv_vdac202
					bill_com	: teamBillCom,	// 操作人单位
					bill_user	: userbillNo,				// 操作人代码
					bill_spec	: document.getElementById("bill_spec").value,
					bill_wflow	: document.getElementById("bill_bflow").innerHTML,
					bill_context: document.getElementById("bill_context").value,
//					bill_date	: document.getElementById("bill_date").value + " 00:00:00",
//					bill_ndate	: document.getElementById("bill_ndate").value + " 00:00:00",
					bill_date	: document.getElementById("bill_date").value + " 00:00:00",
					bill_ndate	: document.getElementById("bill_ndate").value + " 00:00:00",
					bill_text	: billtext,
					bill_title	: billtitle,
				};
				// 提交
				CRUDajax(entryAcctparams,"../login.html",saveSuccess);
			}
			function saveSuccess(){
				var date = new Date();
				var changeStateparams = { 
					name		: "msvr",
					bill_task		: "VE_vdhr401_01",								// 结账指令   	
					bill_no		: document.getElementById("bill_no").innerHTML,		// 要结哪个仓库的账
					bill_com		: teamBillCom,										// 操作人单位
					bill_user		: userbillNo,										// 操作人代码
					bill_date		: vlUtils.dateToString(date)						// 当前时间
				};
//				// 提交
				CRUDajax(changeStateparams,"../login.html",afterSave);
			}
			function afterSave(){
				plus.nativeUI.closeWaiting();//这里监听页面是否加载完毕，完成后关闭等待框
				successFun("vdhr401_sche_plist.html","vdhr401_sche_list.html");
			}
			function choiceDate(){
				dataPicker("bill_date");
			}
			function choiceNdate(){
				dataPicker("bill_ndate");
			}
			//
			document.getElementById("cancelChange").addEventListener("tap",function(){
				document.getElementById("bill_context").value = document.getElementById("old_context").value;
				document.getElementById("changeContext").style.display = "none";
				document.getElementById("oldContext").style.color = "#000";
			});
			//
			document.getElementById("changeValue").addEventListener("tap",function(){
				document.getElementById("bill_context").value = "";
				document.getElementById("changeContext").style.display = "block";
				document.getElementById("oldContext").style.color = "gray";
			});
			//
			document.getElementById("clearValue").addEventListener("tap",function(){
				document.getElementById("bill_context").value = "";
			});
			//
			mui("#banciList").on('tap', 'button', function(e) {
				var e = this;
				var li = e;
				var txt = document.getElementById("bill_context").value;
				if(txt){
					document.getElementById("bill_context").value = txt +","+ e.innerHTML;
				}else{
					document.getElementById("bill_context").value = e.innerHTML;
				}
			});
			//
			mui("#contList").on('tap', '.time', function(e) {
				var _self = this;
//				var txt = document.getElementById("bill_context").value;
				if(_self.picker) {
					_self.picker.show(function (rs) {
					jQuery(_self).find(".btime").html(rs.text);
					_self.picker.dispose();
					_self.picker = null;
					});
				} else {
					var optionsJson = jQuery(_self).children(".btime").attr('data-options') || '{}';
					options = JSON.parse(optionsJson);
					/*
					 * 首次显示时实例化组件
					 * 示例为了简洁，将 options 放在了按钮的 dom 上
					 * 也可以直接通过代码声明 optinos 用于实例化 DtPicker
					 */
			//		_self.picker = new mui.DtPicker(optionsJson);
					_self.picker = new mui.DtPicker(options);
					_self.picker.show(function(rs) {
						jQuery(_self).find(".btime").html(rs.text);
						_self.picker.dispose();
						_self.picker = null;
					});
				}

			});
			//
			document.getElementById("bill_date").value=getdate(new Date(),"bill_date");
			document.getElementById("bill_ndate").value=getdate(new Date(),"bill_ndate");
			function getdate(now,id){
		        var year = now.getFullYear();
		        var month = (now.getMonth() + 1).toString();
		        var day = (now.getDate()).toString();
		        if(id=="bill_ndate"){
		        	day = Number(day) + 1
		        }
		        if (month.length == 1) {
		            month = "0" + month;
		        }
		        if (day.length == 1) {
		            day = "0" + day;
		        }
		        var dateTime = year + "-" + month + "-" + day;
		        return dateTime;
			}
			//
			document.getElementById("addClerk").addEventListener("tap",function(){
				//
				mui.openWindow({
					url: 'vdhr105_VRfind.html',
					id:  'vdhr105_VRfind.html',
					createNew: true,
					extras: {
						teamBillCom 	: teamBillCom, 		// 1.管理单位代码
						teamBillComName : teamBillComName,	// 2.管理单位名称
						fbill_no 		: fbill_no,			// 3.fbill_no是
						loginCom 		: loginCom,			// 4.登录单位代码
						loginComName 	: loginComName,		// 5.登录单位名称
						userbillNo 		: userbillNo,		// 6.登录人的代码
						userName 		: userName,			// 7.登录人的姓名
						privileges 		: privileges,		// 8.当前的权限是
						fromPage 		: "vdhr401_sche_edit.html",			// 9.从哪个页面来
//						choice			: "single",
						 choice			: "multiple",
						serialNum		: "",
						bill_name		: document.getElementById("bill_spec").value,
						bill_task		: "VR_find_vdhr105_03"
					}
				});
			});
			mui("#banzuMember").on('tap', 'li', function(e) {
				var e = this;
				var li = e;
				var potionArr = [
					{"title": "更换"},
					{"title": "删除"}
				]
				// 弹框
				plus.nativeUI.actionSheet({
					title: li.innerHTML,
					cancel: "取消",
					buttons: potionArr
				}, function(e) {
					if(potionArr[(e.index - 1)].title == "更换"){
						// 打开选择页面
						mui.openWindow({
							url: 'vdhr105_VRfind.html',
							id:  'vdhr105_VRfind.html',
							createNew: true,
							extras: {
								teamBillCom 	: teamBillCom, 		// 1.管理单位代码
								teamBillComName : teamBillComName,	// 2.管理单位名称
								fbill_no 		: fbill_no,			// 3.fbill_no是
								loginCom 		: loginCom,			// 4.登录单位代码
								loginComName 	: loginComName,		// 5.登录单位名称
								userbillNo 		: userbillNo,		// 6.登录人的代码
								userName 		: userName,			// 7.登录人的姓名
								privileges 		: privileges,		// 8.当前的权限是
								fromPage 		: "vdhr401_sche_edit.html",			// 9.从哪个页面来
								choice			: "single",
								// choice		: "multiple",
								serialNum		: jQuery(li).index(),
								bill_name		: document.getElementById("bill_spec").value,
								bill_task		: "VR_find_vdhr105"
							}
						});
					}else if(potionArr[(e.index - 1)].title == "删除"){
						var txt = '是否要删除“'+li.innerHTML +'”？'
						// 弹出确认删除菜单，确认后删除
						mui.confirm(txt, "删除确认", ["删除", "不删除"], function(e) {
							if(e.index == 0) {
								// 是
								li.parentNode.removeChild(li);
							} else {
								// 否
							}
						});
					}
				});
			});
			// 查询当前班组人员：
			function clerkInfo(data,type,selectback){
				if(data.data.length != 0) {
					var banzuMember = document.getElementById("banzuMember");
					for(var i = 0; i < data.data.length; i++) {
						var newdataArr = {};
						for(var k in data.data[i]) {
							newdataArr[k.slice(0, 2)] = data.data[i][k];
						}
						//
						var text = '';
						if(type&&i==0){
							banzuMember.innerHTML = "";
						}
						var li = document.createElement("li");
						li.setAttribute("data-row",JSON.stringify(newdataArr));
						li.setAttribute("data-no",newdataArr["图片"]);
						li.setAttribute("class", "mui-col-xs-6");
						li.style.paddingLeft = "5px";
						li.style.height = "30px";
						li.style.lineHeight = "30px";
//						<li class="mui-col-xs-6" style=": ;: ;: 5px;">刘1</li>
						
						if(type&&i==0){
						}
//						li.innerHTML = newdataArr["标题"]+"="+newdataArr["图片"].slice(-8);
						li.innerHTML = newdataArr["标题"];
						banzuMember.appendChild(li);
					}
				}else{
					if(!selectback){
						document.getElementById("banzuMember").innerHTML = '<li style="color:gray;">未查询到相关信息~</li>';
					}
				}
			}
			function banciInfo(data,type){
				if(data.data.length != 0) {
					var contList = document.getElementById("contList");
					for(var i = 0; i < data.data.length; i++) {
						var newdataArr = {};
						for(var k in data.data[i]) {
							newdataArr[k.slice(0, 2)] = data.data[i][k];
						}
						//
						var text = '';
						if(type&&i==0){
							contList.innerHTML = "";
						}
						var li = document.createElement("li");
						li.setAttribute("data-row",JSON.stringify(newdataArr));
						li.setAttribute("data-no",newdataArr["图片"]);
						li.setAttribute("class", "mui-row");
						li.style.padding = "3px";
						li.style.margin = "0px";
						var type ={"type":"time"};
//						<li class="mui-col-xs-6" style=": ;: ;: 5px;">刘1</li>
						var text = ''
						text += '<span class="mui-col-xs-4 banci">'+newdataArr["标题"]+'</span>';
						text += '<span class="mui-col-xs-4 time"><span class="btime shangban" data-options='+JSON.stringify(type)+'>'+newdataArr["内容"].split(",")[0]+'</span><span class="mui-icon mui-icon-compose" style="font-size:20px;color:#007aff;"></span></span>';
						text += '<span class="mui-col-xs-4 time"><span class="btime xiaban" data-options='+JSON.stringify(type)+'>'+newdataArr["内容"].split(",")[1]+'</span><span class="mui-icon mui-icon-compose" style="font-size:20px;color:#007aff;"></span></span>';
						if(type&&i==0){
						}
						li.innerHTML = text;
						contList.appendChild(li);
					}
				}else{
					document.getElementById("contList").innerHTML = '<li style="color:gray;">未查询到相关信息~</li>';
				}
			}
		}); // plusReady
	</script>
</html>